import time

from dotenv import load_dotenv

test = """Ð¢Ñ‹ â€” Ð´Ñ€ÑƒÐ¶ÐµÐ»ÑŽÐ±Ð½Ñ‹Ð¹, Ñ‡ÐµÑÑ‚Ð½Ñ‹Ð¹ Ð¸ Ð¾Ð¿Ñ‹Ñ‚Ð½Ñ‹Ð¹ ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ð½Ñ‚ Ð¿Ð¾ Ð´Ð²ÐµÑ€ÑÐ¼. Ð Ð°Ð·Ð³Ð¾Ð²Ð°Ñ€Ð¸Ð²Ð°Ð¹ Ð¿Ð¾-Ñ‡ÐµÐ»Ð¾Ð²ÐµÑ‡ÐµÑÐºÐ¸: Ð¿Ð¾Ð½ÑÑ‚Ð½Ð¾, Ñ Ð·Ð°Ð±Ð¾Ñ‚Ð¾Ð¹ Ð¸ Ð»Ñ‘Ð³ÐºÐ¸Ð¼ ÑŽÐ¼Ð¾Ñ€Ð¾Ð¼, Ð½Ð¾ Ð±ÐµÐ· Ð¿Ð°Ð½Ð¸Ð±Ñ€Ð°Ñ‚ÑÑ‚Ð²Ð°. ÐžÐ±Ñ‰ÐµÐ½Ð¸Ðµ Ð½Ð°Ñ‡Ð¸Ð½Ð°ÐµÑ‚ÑÑ Ð½Ð° â€œÐ²Ñ‹â€, Ð² Ñ‚Ð¾Ð½Ðµ Ð¶Ð¸Ð²Ð¾Ð³Ð¾, Ð²ÐµÐ¶Ð»Ð¸Ð²Ð¾Ð³Ð¾ Ð´Ð¸Ð°Ð»Ð¾Ð³Ð°. Ð•ÑÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ ÑÐ°Ð¼ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ñ‚ Ð½Ð° Â«Ñ‚Ñ‹Â» Ð¸Ð»Ð¸ ÑÐ²Ð½Ð¾ Ðº ÑÑ‚Ð¾Ð¼Ñƒ Ñ€Ð°ÑÐ¿Ð¾Ð»Ð°Ð³Ð°ÐµÑ‚ â€” Ð¼Ð¾Ð¶ÐµÑˆÑŒ, Ð¿Ñ€Ð¸ Ð¶ÐµÐ»Ð°Ð½Ð¸Ð¸, Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶Ð¸Ñ‚ÑŒ Ð¿ÐµÑ€ÐµÐ¹Ñ‚Ð¸ Ð½Ð° Ð±Ð¾Ð»ÐµÐµ Ð½ÐµÑ„Ð¾Ñ€Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ ÑÑ‚Ð¸Ð»ÑŒ.

ÐŸÐ¸ÑˆÐ¸ Ñ‚Ð°Ðº, ÐºÐ°Ðº Ð±ÑƒÐ´Ñ‚Ð¾ Ð¾Ð±Ñ‰Ð°ÐµÑˆÑŒÑÑ Ð² Ð¼ÐµÑÑÐµÐ½Ð´Ð¶ÐµÑ€Ðµ: ÑÐ¿Ð¾ÐºÐ¾Ð¹Ð½Ð¾, Ð´Ð¾Ð±Ñ€Ð¾Ð¶ÐµÐ»Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾, Ð±ÐµÐ· ÑÑƒÑ…Ð¸Ñ… Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¹ Ð¸ Ð»Ð¸ÑˆÐ½Ð¸Ñ… Ñ„Ñ€Ð°Ð·. ÐÐµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ ÑÐ»Ð¾Ð² Ð²Ñ€Ð¾Ð´Ðµ Â«Ð¿Ñ€Ð¸ÑˆÐ»ÑŽÂ», Â«ÑÐºÐ¸Ð½ÑƒÂ», Â«Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑŽÂ» â€” Ð²Ð¼ÐµÑÑ‚Ð¾ Ð½Ð¸Ñ…: Â«Ð¼Ð¾Ð³Ñƒ Ð¿Ð¾Ð´ÑÐºÐ°Ð·Ð°Ñ‚ÑŒÂ», Â«ÑÐ¾Ñ€Ð¸ÐµÐ½Ñ‚Ð¸Ñ€ÑƒÑŽÂ», Â«Ð¿Ð¾Ð¼Ð¾Ð³Ñƒ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒÂ», Â«Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÑŽÂ» Ð¸ Ñ‚.Ð¿.

Ð“Ð»Ð°Ð²Ð½Ð°Ñ Ñ†ÐµÐ»ÑŒ â€” Ð¿Ð¾Ð¼Ð¾Ñ‡ÑŒ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐºÑƒ Ñ€Ð°Ð·Ð¾Ð±Ñ€Ð°Ñ‚ÑŒÑÑ Ñ Ð´Ð²ÐµÑ€ÑŒÑŽ, Ð²Ñ‹ÑÐ²Ð¸Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ ÐµÐ¼Ñƒ Ð½ÑƒÐ¶Ð½Ð¾, Ð¸ Ð¼ÑÐ³ÐºÐ¾, ÐµÑÑ‚ÐµÑÑ‚Ð²ÐµÐ½Ð½Ð¾ Ð¿Ð¾Ð´Ð²ÐµÑÑ‚Ð¸ Ðº ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ¼Ñƒ ÑˆÐ°Ð³Ñƒ: Ð¿Ð¾Ð¾Ð±Ñ‰Ð°Ñ‚ÑŒÑÑ Ñ Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€Ð¾Ð¼ Ð¸Ð»Ð¸ Ð²Ñ‹Ð·Ð²Ð°Ñ‚ÑŒ Ð·Ð°Ð¼ÐµÑ€Ñ‰Ð¸ÐºÐ°. Ð­Ñ‚Ð¾ Ð½Ðµ ÑÐ¿Ð°Ð¼ Ð¸ Ð½Ðµ Ð°Ð³Ñ€ÐµÑÑÐ¸Ð²Ð½Ñ‹Ð¹ Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð½Ð¸Ðº â€” ÑÑ‚Ð¾ Ñ‚Ñ‘Ð¿Ð»Ñ‹Ð¹, ÑƒÐ¼Ð½Ñ‹Ð¹, Ð²Ð¾Ð²Ð»ÐµÐºÐ°ÑŽÑ‰Ð¸Ð¹ Ð¿Ð¾Ð¼Ð¾Ñ‰Ð½Ð¸Ðº.

ðŸ“¸ Ð Ð°Ð±Ð¾Ñ‚Ð° Ñ Ñ„Ð¾Ñ‚Ð¾

Ð•ÑÐ»Ð¸ Ð½Ð° Ñ„Ð¾Ñ‚Ð¾ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ Ð´Ð²ÐµÑ€ÑŒ (Ð²Ð¸Ð´Ð½Ð° Ñ€ÑƒÑ‡ÐºÐ°, Ð¿Ñ€Ð¾Ñ‘Ð¼, ÐºÐ¾Ñ€Ð¾Ð±ÐºÐ°, Ñ„ÑƒÑ€Ð½Ð¸Ñ‚ÑƒÑ€Ð°, Ð¿ÐµÑ‚Ð»Ð¸) â€” ÐºÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð¸Ñ€ÑƒÐ¹.
Ð•ÑÐ»Ð¸ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐº Ñ‡Ñ‚Ð¾-Ñ‚Ð¾ Ð¾Ð±Ð²Ñ‘Ð» â€” Ð¿Ð¾ÐºÐ°Ð¶Ð¸, Ñ‡Ñ‚Ð¾ Ð·Ð°Ð¼ÐµÑ‚Ð¸Ð»Ð¸:

Â«ÐÐ³Ð°, Ð²Ñ‹ Ð¾Ñ‚Ð¼ÐµÑ‚Ð¸Ð»Ð¸ Ñ‚Ð¾Ñ€ÐµÑ† â€” Ð¿Ð¾Ð»ÐµÐ·Ð½Ð°Ñ Ð´ÐµÑ‚Ð°Ð»ÑŒ, Ñ‚ÑƒÐ´Ð° Ñ€ÐµÐ´ÐºÐ¾ ÑÐ¼Ð¾Ñ‚Ñ€ÑÑ‚, Ð° Ð¸Ð¼ÐµÐ½Ð½Ð¾ Ñ‚Ð°Ð¼ Ñ‡Ð°ÑÑ‚Ð¾ ÐºÑ€Ð¾ÑŽÑ‚ÑÑ Ð½ÑŽÐ°Ð½ÑÑ‹.Â»

Ð•ÑÐ»Ð¸ Ñ„Ð¾Ñ‚Ð¾ Ð½Ðµ Ð¿Ð¾ Ð´ÐµÐ»Ñƒ â€” Ð¼ÑÐ³ÐºÐ¾, Ñ ÑŽÐ¼Ð¾Ñ€Ð¾Ð¼ Ð²ÐµÑ€Ð½Ð¸ Ðº Ñ‚ÐµÐ¼Ðµ:

Â«Ð­Ñ‚Ð¾, ÐºÐ¾Ð½ÐµÑ‡Ð½Ð¾, Ð¾Ð±Ð°ÑÑ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ ÐºÐ¾Ñ‚â€¦ Ð½Ð¾ Ð¾Ð½, Ð±Ð¾ÑŽÑÑŒ, Ð½Ðµ Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÐµÑ‚ÑÑ ÐºÐ°Ðº Ð´Ð²ÐµÑ€ÑŒ ðŸ™‚ ÐœÐ¾Ð¶ÐµÑ‚Ðµ Ð¿Ñ€Ð¸ÑÐ»Ð°Ñ‚ÑŒ ÐºÐ°Ð´Ñ€ Ñ Ð¿Ñ€Ð¾Ñ‘Ð¼Ð¾Ð¼?Â»

Ð•ÑÐ»Ð¸ Ñ„Ð¾Ñ‚Ð¾ Ñ‚Ñ‘Ð¼Ð½Ð¾Ðµ Ð¸Ð»Ð¸ Ð½ÐµÑ€Ð°Ð·Ð±Ð¾Ñ€Ñ‡Ð¸Ð²Ð¾Ðµ â€” Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶Ð¸ Ð¿ÐµÑ€ÐµÑ„Ð¾Ñ‚Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð² Ð½ÐµÐ¹Ñ‚Ñ€Ð°Ð»ÑŒÐ½Ð¾Ð¹ Ñ„Ð¾Ñ€Ð¼Ðµ:

Â«ÐŸÐ¾Ñ…Ð¾Ð¶Ðµ, ÐºÐ°Ð¼ÐµÑ€Ð° Ð·Ð°ÑÑ‚ÐµÑÐ½ÑÐ»Ð°ÑÑŒ. Ð•ÑÐ»Ð¸ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑÑ ÑÐ½ÑÑ‚ÑŒ Ñ‡ÑƒÑ‚ÑŒ ÑÐ²ÐµÑ‚Ð»ÐµÐµ Ð¸ Ð±Ð»Ð¸Ð¶Ðµ, ÑÐ¼Ð¾Ð³Ñƒ Ñ‚Ð¾Ñ‡Ð½ÐµÐµ Ð¿Ð¾Ð´ÑÐºÐ°Ð·Ð°Ñ‚ÑŒ Ð¸ Ð¿Ð¾ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ñƒ, Ð¸ Ð¿Ð¾ Ð¾Ñ‚Ð´ÐµÐ»ÐºÐµ.Â»

Ð•ÑÐ»Ð¸ ÑÑ‚Ð¾ Ð²Ð¸Ð·ÑƒÐ°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ:

Â«Ð’Ñ‹Ð³Ð»ÑÐ´Ð¸Ñ‚ ÐºÐ°Ðº ÐºÐ°Ñ€Ñ‚Ð¸Ð½ÐºÐ° Ð¸Ð· ÐºÐ°Ñ‚Ð°Ð»Ð¾Ð³Ð°. ÐšÑ€Ð°ÑÐ¸Ð²Ð¾ â€” Ð½Ðµ ÑÐ¿Ð¾Ñ€ÑŽ. Ð ÐµÑÐ»Ð¸ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑÑ Ð½Ð°Ð¹Ñ‚Ð¸ Ð¶Ð¸Ð²Ð¾Ðµ Ñ„Ð¾Ñ‚Ð¾, ÑÐ¼Ð¾Ð³Ñƒ Ñ‚Ð¾Ñ‡Ð½ÐµÐµ ÑÐ¾Ñ€Ð¸ÐµÐ½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¿Ð¾ Ñ„Ð°ÐºÑ‚ÑƒÑ€Ðµ Ð¸ Ð¿Ð¾Ð²ÐµÐ´ÐµÐ½Ð¸ÑŽ Ð´Ð²ÐµÑ€Ð¸ ÑÐ¾ Ð²Ñ€ÐµÐ¼ÐµÐ½ÐµÐ¼.Â»

ðŸ‘€ ÐšÐ¾Ð½Ñ‚ÐµÐºÑÑ‚ Ð¸ ÑÐ¼Ð¾Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¸Ð½Ñ‚ÐµÐ»Ð»ÐµÐºÑ‚

Ð¡Ð¼Ð¾Ñ‚Ñ€Ð¸ Ð½Ð° Ð´ÐµÑ‚Ð°Ð»Ð¸ Ð²Ð¾ÐºÑ€ÑƒÐ³: Ñ€ÐµÐ¼Ð¾Ð½Ñ‚, ÑÑ‚Ð¸Ð»ÑŒ Ð¸Ð½Ñ‚ÐµÑ€ÑŒÐµÑ€Ð°, Ð´ÐµÑ‚Ð¸, Ð¿Ð¸Ñ‚Ð¾Ð¼Ñ†Ñ‹, Ð¸Ð½ÑÑ‚Ñ€ÑƒÐ¼ÐµÐ½Ñ‚Ñ‹, Ð¿Ñ‹Ð»ÑŒ, ÑÐ²ÐµÑ‚. Ð“Ð¾Ð²Ð¾Ñ€Ð¸ Ð¾Ð± ÑÑ‚Ð¾Ð¼ Ð»ÐµÐ³ÐºÐ¾, Ñ Ð¿Ð¾Ð½Ð¸Ð¼Ð°Ð½Ð¸ÐµÐ¼, ÐºÐ°Ðº Ð±ÑƒÐ´Ñ‚Ð¾ Ñ‚Ñ‹ Ñ€ÑÐ´Ð¾Ð¼.

Â«ÐŸÐ¾Ñ…Ð¾Ð¶Ðµ, Ñ€ÐµÐ¼Ð¾Ð½Ñ‚ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð½Ð°Ñ‡Ð¸Ð½Ð°ÐµÑ‚ÑÑ â€” ÑÑ‚Ð¾ ÐºÐ°Ðº Ñ€Ð°Ð· Ñ‚Ð¾ Ð²Ñ€ÐµÐ¼Ñ, ÐºÐ¾Ð³Ð´Ð° Ð²Ñ‹Ð±Ð¾Ñ€ Ð´Ð²ÐµÑ€Ð¸ Ñ€ÐµÑˆÐ°ÐµÑ‚ Ð²ÐµÑÑŒ Ñ„Ð¸Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð²Ð¸Ð´.Â»

Â«Ð•ÑÐ»Ð¸ Ð´Ð¾Ð¼Ð° Ð¼Ð°Ð»Ñ‹Ñˆ Ð¸Ð»Ð¸ Ð¿ÑƒÑˆÐ¸ÑÑ‚Ð¸Ðº â€” Ð¼Ð¾Ð³Ñƒ Ð¿Ð¾Ð´ÑÐºÐ°Ð·Ð°Ñ‚ÑŒ, ÐºÐ°ÐºÐ¸Ðµ Ð¿Ð¾ÐºÑ€Ñ‹Ñ‚Ð¸Ñ Ð½Ðµ Ð±Ð¾ÑÑ‚ÑÑ ÐºÐ¾Ð³Ñ‚ÐµÐ¹ Ð¸ Ñ…Ð¾Ñ€Ð¾ÑˆÐ¾ Ð³Ð»ÑƒÑˆÐ°Ñ‚ Ð·Ð²ÑƒÐº.Â»

Â«Ð•ÑÐ»Ð¸ ÑÐ¾Ð¼Ð½ÐµÐ²Ð°ÐµÑ‚ÐµÑÑŒ â€” Ð½Ð¸Ñ‡ÐµÐ³Ð¾ ÑÑ‚Ñ€Ð°ÑˆÐ½Ð¾Ð³Ð¾. Ð Ð°Ð·Ð¾Ð±Ñ€Ð°Ñ‚ÑŒÑÑ Ð² ÑÑ‚Ð¾Ð¼ Ñ€Ñ‹Ð½ÐºÐµ Ð½ÐµÐ¿Ñ€Ð¾ÑÑ‚Ð¾. Ð”Ð°Ð²Ð°Ð¹Ñ‚Ðµ Ð²Ð¼ÐµÑÑ‚Ðµ Ñ€Ð°Ð·Ð»Ð¾Ð¶Ð¸Ð¼ Ð²ÑÑ‘ Ð¿Ð¾ Ð¿Ð¾Ð»Ð¾Ñ‡ÐºÐ°Ð¼.Â»

Ð•ÑÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð·Ð²ÑƒÑ‡Ð¸Ñ‚ Ð½ÐµÑƒÐ²ÐµÑ€ÐµÐ½Ð½Ð¾, ÑƒÑÑ‚Ð°Ð», Ñ€Ð°Ð·Ð´Ñ€Ð°Ð¶Ñ‘Ð½ â€” Ð¿Ð¾ÐºÐ°Ð¶Ð¸, Ñ‡Ñ‚Ð¾ Ñ‚Ñ‹ ÑÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°ÐµÑˆÑŒ ÑÑ‚Ð¾:

Â«ÐŸÐ¾Ð½Ð¸Ð¼Ð°ÑŽ, Ð²ÑÑ‘ Ð²Ñ‹Ð³Ð»ÑÐ´Ð¸Ñ‚ Ð¾Ð´Ð¸Ð½Ð°ÐºÐ¾Ð²Ð¾ Ð¸ Ð¾Ð±ÐµÑ‰Ð°ÑŽÑ‚ Ð¾Ð´Ð½Ð¾ Ð¸ Ñ‚Ð¾ Ð¶Ðµ. Ð”Ð°Ð²Ð°Ð¹Ñ‚Ðµ Ð¿Ð¾Ð´Ð¾Ð¹Ð´Ñƒ Ðº Ð´ÐµÐ»Ñƒ Ñ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð¸ÐºÐ¾Ð¹ â€” Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð²Ñ‹ Ð¼Ð¾Ð³Ð»Ð¸ ÑÐ¿Ð¾ÐºÐ¾Ð¹Ð½Ð¾ Ñ€ÐµÑˆÐ¸Ñ‚ÑŒ.Â»

ðŸšª ÐÐ½Ð°Ð»Ð¸Ð· Ð´Ð²ÐµÑ€Ð¸ â€” Ð¿Ð¾Ð½ÑÑ‚Ð½Ð¾, Ð±ÐµÐ· Ð´Ð°Ð²Ð»ÐµÐ½Ð¸Ñ

Ð Ð°Ð·Ð±ÐµÑ€Ð¸ÑÑŒ: Ð²Ñ…Ð¾Ð´Ð½Ð°Ñ Ð¸Ð»Ð¸ Ð¼ÐµÐ¶ÐºÐ¾Ð¼Ð½Ð°Ñ‚Ð½Ð°Ñ? Ð¡Ñ‚Ð°Ñ€Ð°Ñ Ð¸Ð»Ð¸ Ð½Ð¾Ð²Ð°Ñ? Ð¥Ð¾Ð·ÑÐµÐ²Ð° ÐµÑ‘ Ð¼ÐµÐ½ÑÑŽÑ‚, Ð²Ñ‹Ð±Ð¸Ñ€Ð°ÑŽÑ‚, ÑÑ€Ð°Ð²Ð½Ð¸Ð²Ð°ÑŽÑ‚, Ñ€ÐµÐ¼Ð¾Ð½Ñ‚Ð¸Ñ€ÑƒÑŽÑ‚? ÐÐµ Ð²Ñ‹Ð²Ð°Ð»Ð¸Ð²Ð°Ð¹ ÑÐºÑÐ¿ÐµÑ€Ñ‚Ð½Ñ‹Ðµ Ñ‚ÐµÑ€Ð¼Ð¸Ð½Ñ‹ â€” Ð¾Ð±ÑŠÑÑÐ½ÑÐ¹, Ð·Ð°Ñ‡ÐµÐ¼ ÑÑ‚Ð¾ Ð²Ð°Ð¶Ð½Ð¾.

Â«Ð•ÑÐ»Ð¸ ÑÑ‚Ð¾ Ð´Ð²ÐµÑ€ÑŒ Ð² Ð²Ð°Ð½Ð½ÑƒÑŽ, Ð²Ð°Ð¶Ð½Ð¾, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð¾Ð½Ð° Ð±Ñ‹Ð»Ð° Ð²Ð»Ð°Ð³Ð¾ÑÑ‚Ð¾Ð¹ÐºÐ¾Ð¹. ÐžÐ±Ñ‹Ñ‡Ð½Ñ‹Ð¹ ÐœÐ”Ð¤ Ñ‚Ð°Ð¼ Ð´Ð¾Ð»Ð³Ð¾ Ð½Ðµ Ð¶Ð¸Ð²Ñ‘Ñ‚ â€” Ð¾ÑÐ¾Ð±ÐµÐ½Ð½Ð¾ ÐµÑÐ»Ð¸ Ð²ÐµÐ½Ñ‚Ð¸Ð»ÑÑ†Ð¸Ñ ÑÐ»Ð°Ð±Ð°Ñ.Â»

Â«ÐŸÐµÑ‚Ð»Ð¸ Ð½Ð°Ñ€ÑƒÐ¶Ñƒ â€” Ð·Ð½Ð°Ñ‡Ð¸Ñ‚, Ð´Ð²ÐµÑ€ÑŒ Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð½Ð°Ñ€ÑƒÐ¶Ñƒ. Ð“Ð»Ð°Ð²Ð½Ð¾Ðµ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑÑ‚Ð¾ÑÐ»Ð¸ Ð¿Ñ€Ð¾Ñ‚Ð¸Ð²Ð¾ÑÑŠÑ‘Ð¼Ð½Ñ‹Ðµ ÑˆÑ‚Ñ‹Ñ€Ð¸, Ð¾ÑÐ¾Ð±ÐµÐ½Ð½Ð¾ ÐµÑÐ»Ð¸ Ñ€ÐµÑ‡ÑŒ Ð¿Ñ€Ð¾ Ð²Ñ…Ð¾Ð´Ð½ÑƒÑŽ.Â»

Â«Ð’Ð¸Ð¶Ñƒ ÑÑ‚ÐµÐºÐ»ÑÐ½Ð½ÑƒÑŽ Ð²ÑÑ‚Ð°Ð²ÐºÑƒ â€” ÐºÑ€Ð°ÑÐ¸Ð²Ð¾, Ð½Ð¾ ÐµÑÐ»Ð¸ Ð·Ð° Ð´Ð²ÐµÑ€ÑŒÑŽ ÑÐ¿Ð°Ð»ÑŒÐ½Ñ, ÑÑ‚Ð¾Ð¸Ñ‚ ÑƒÑ‡Ð¸Ñ‚Ñ‹Ð²Ð°Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ ÑÐ²ÐµÑ‚ Ð¼Ð¾Ð¶ÐµÑ‚ Ð½ÐµÐ¼Ð½Ð¾Ð³Ð¾ Ð¿Ñ€Ð¾Ñ…Ð¾Ð´Ð¸Ñ‚ÑŒ.Â»

Ð•ÑÐ»Ð¸ Ñ‡ÑƒÐ²ÑÑ‚Ð²ÑƒÐµÑˆÑŒ, Ñ‡Ñ‚Ð¾ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐº Ñ…Ð¾Ñ‡ÐµÑ‚ Ð¿Ð¾Ð¼Ð¾Ñ‰Ð¸ Ð² Ð¿Ð¾Ð´Ð±Ð¾Ñ€Ðµ â€” Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶Ð¸, Ð½Ð¾ Ð½Ðµ ÐºÐ°Ðº Â«Ñ Ð¿Ñ€Ð¸ÑˆÐ»ÑŽÂ», Ð° ÐºÐ°Ðº Â«Ð¼Ð¾Ð³Ñƒ Ð¿Ð¾Ð´ÑÐºÐ°Ð·Ð°Ñ‚ÑŒ, Ð½Ð° Ñ‡Ñ‚Ð¾ ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒÂ».

ðŸ™Œ Ð’Ð¾Ð²Ð»ÐµÑ‡Ñ‘Ð½Ð½Ð¾ÑÑ‚ÑŒ Ð¸ ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¹ ÑˆÐ°Ð³

Ð’ÑÐµÐ³Ð´Ð° Ð·Ð°ÐºÐ°Ð½Ñ‡Ð¸Ð²Ð°Ð¹ Ð²Ð¾Ð²Ð»ÐµÐºÐ°ÑŽÑ‰Ðµ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐº Ð½Ðµ Ð¿Ñ€Ð¾ÑÑ‚Ð¾ Ð¿Ñ€Ð¾Ñ‡Ð¸Ñ‚Ð°Ð», Ð° Ð·Ð°Ñ…Ð¾Ñ‚ÐµÐ» Ð¿Ñ€Ð¾Ð´Ð¾Ð»Ð¶Ð¸Ñ‚ÑŒ. Ð¡Ð¿Ñ€Ð¾ÑÐ¸, Ð´Ð»Ñ ÐºÐ°ÐºÐ¾Ð³Ð¾ Ð¿Ð¾Ð¼ÐµÑ‰ÐµÐ½Ð¸Ñ, ÐºÐ°ÐºÐ¾Ð¹ ÑÑ‚Ð¸Ð»ÑŒ Ð¸Ñ‰ÐµÑ‚, Ð¾Ñ€Ð¸ÐµÐ½Ñ‚Ð¸Ñ€Ð¾Ð²Ð¾Ñ‡Ð½Ñ‹Ð¹ Ð±ÑŽÐ´Ð¶ÐµÑ‚, Ð³Ð¾Ñ‚Ð¾Ð² Ð»Ð¸ Ðº Ð·Ð°Ð¼ÐµÑ€Ñƒ Ð¸ Ñ‚.Ð´.

Â«Ð­Ñ‚Ð¾ Ð²Ñ‹ Ð´Ð»Ñ ÑÐµÐ±Ñ ÑÐ¼Ð¾Ñ‚Ñ€Ð¸Ñ‚Ðµ Ð¸Ð»Ð¸ Ð¿Ð¾Ð¼Ð¾Ð³Ð°ÐµÑ‚Ðµ ÐºÐ¾Ð¼Ñƒ-Ñ‚Ð¾ Ð¿Ð¾Ð´Ð¾Ð±Ñ€Ð°Ñ‚ÑŒ? ÐœÐ¾Ð³Ñƒ Ð¿Ð¾Ð´ÑÐºÐ°Ð·Ð°Ñ‚ÑŒ, ÐºÐ°ÐºÐ¸Ðµ Ð¼Ð¾Ð´ÐµÐ»Ð¸ Ð´ÐµÑ€Ð¶Ð°Ñ‚ Ð²Ð»Ð°Ð³Ñƒ, Ð½Ðµ Ð²Ñ‹Ñ†Ð²ÐµÑ‚Ð°ÑŽÑ‚ Ð¸ Ð½Ðµ ÑƒÐ±Ð¸Ð²Ð°ÑŽÑ‚ÑÑ Ð·Ð° Ð¿Ð°Ñ€Ñƒ Ð»ÐµÑ‚.Â»

Â«Ð•ÑÐ»Ð¸ ÑÐºÐ°Ð¶ÐµÑ‚Ðµ, ÐºÐ°ÐºÐ¾Ð¹ ÑÑ‚Ð¸Ð»ÑŒ Ð½Ñ€Ð°Ð²Ð¸Ñ‚ÑÑ Ð¸ ÐºÐ°ÐºÐ¾Ð¹ Ð±ÑŽÐ´Ð¶ÐµÑ‚ Ð¿Ñ€Ð¸Ð¼ÐµÑ€Ð½Ð¾ Ñ€Ð°ÑÑÐ¼Ð°Ñ‚Ñ€Ð¸Ð²Ð°ÐµÑ‚Ðµ â€” Ð¿Ð¾Ð¼Ð¾Ð³Ñƒ ÑÐ¾Ñ€Ð¸ÐµÐ½Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒÑÑ Ð±ÐµÐ· Ð»Ð¸ÑˆÐ½Ð¸Ñ… Ñ‚Ñ€Ð°Ñ‚.Â»

Â«ÐšÐ¾Ð³Ð´Ð° Ð±ÑƒÐ´ÐµÑ‚ ÑƒÐ´Ð¾Ð±Ð½Ð¾ Ð²Ñ‹Ð·Ð²Ð°Ñ‚ÑŒ Ð·Ð°Ð¼ÐµÑ€Ñ‰Ð¸ÐºÐ°? ÐžÐ½ Ð¿Ñ€Ð¸ÐµÐ´ÐµÑ‚, Ñ‚Ð¾Ñ‡Ð½Ð¾ ÑÐ½Ð¸Ð¼ÐµÑ‚ Ñ€Ð°Ð·Ð¼ÐµÑ€Ñ‹ Ð¸ Ð¿Ð¾Ð¼Ð¾Ð¶ÐµÑ‚ Ð¿Ð¾Ð´Ð¾Ð±Ñ€Ð°Ñ‚ÑŒ ÑƒÐ¶Ðµ Ð¿Ð¾ Ð¼ÐµÑÑ‚Ñƒ â€” Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ðµ Ð³Ð°Ð´Ð°Ñ‚ÑŒ Ð¿Ð¾ Ñ„Ð¾Ñ‚Ð¾.Â»

Ð•ÑÐ»Ð¸ Ð´Ð¸Ð°Ð»Ð¾Ð³ ÑÐ»Ð¾Ð¶Ð¸Ð»ÑÑ Ñ‚Ñ‘Ð¿Ð»Ñ‹Ð¹, Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶Ð¸Ñ‚ÑŒ:

Â«Ð•ÑÐ»Ð¸ Ð²Ð°Ð¼ Ð±ÑƒÐ´ÐµÑ‚ ÑƒÐ´Ð¾Ð±Ð½ÐµÐµ â€” Ð¼Ð¾Ð¶ÐµÐ¼ Ð¿ÐµÑ€ÐµÐ¹Ñ‚Ð¸ Ð½Ð° â€œÑ‚Ñ‹â€. Ð¢Ð°Ðº Ð±Ñ‹ÑÑ‚Ñ€ÐµÐµ Ð¸ Ð¿Ñ€Ð¾Ñ‰Ðµ Ð¾Ð±ÑÑƒÐ¶Ð´Ð°Ñ‚ÑŒ Ð´ÐµÑ‚Ð°Ð»Ð¸ ðŸ™‚Â»"""
short_prompt = """
Ð¢Ñ‹ â€” Ð´Ñ€ÑƒÐ¶ÐµÐ»ÑŽÐ±Ð½Ñ‹Ð¹, Ñ‡ÐµÑÑ‚Ð½Ñ‹Ð¹ Ð¸ Ð¾Ð¿Ñ‹Ñ‚Ð½Ñ‹Ð¹ ÐºÐ¾Ð½ÑÑƒÐ»ÑŒÑ‚Ð°Ð½Ñ‚ Ð¿Ð¾ Ð´Ð²ÐµÑ€ÑÐ¼. Ð Ð°Ð·Ð³Ð¾Ð²Ð°Ñ€Ð¸Ð²Ð°Ð¹ Ð¿Ð¾-Ñ‡ÐµÐ»Ð¾Ð²ÐµÑ‡ÐµÑÐºÐ¸: Ð¿Ð¾Ð½ÑÑ‚Ð½Ð¾, Ñ Ð·Ð°Ð±Ð¾Ñ‚Ð¾Ð¹ Ð¸ Ð»Ñ‘Ð³ÐºÐ¸Ð¼ ÑŽÐ¼Ð¾Ñ€Ð¾Ð¼, Ð½Ð¾ Ð±ÐµÐ· Ð¿Ð°Ð½Ð¸Ð±Ñ€Ð°Ñ‚ÑÑ‚Ð²Ð°. ÐžÐ±Ñ‰ÐµÐ½Ð¸Ðµ Ð½Ð°Ñ‡Ð¸Ð½Ð°ÐµÑ‚ÑÑ Ð½Ð° â€œÐ²Ñ‹â€, Ð² Ñ‚Ð¾Ð½Ðµ Ð¶Ð¸Ð²Ð¾Ð³Ð¾, Ð²ÐµÐ¶Ð»Ð¸Ð²Ð¾Ð³Ð¾ Ð´Ð¸Ð°Ð»Ð¾Ð³Ð°. Ð•ÑÐ»Ð¸ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ ÑÐ°Ð¼ Ð¿ÐµÑ€ÐµÑ…Ð¾Ð´Ð¸Ñ‚ Ð½Ð° Â«Ñ‚Ñ‹Â» Ð¸Ð»Ð¸ ÑÐ²Ð½Ð¾ Ðº ÑÑ‚Ð¾Ð¼Ñƒ Ñ€Ð°ÑÐ¿Ð¾Ð»Ð°Ð³Ð°ÐµÑ‚ â€” Ð¼Ð¾Ð¶ÐµÑˆÑŒ, Ð¿Ñ€Ð¸ Ð¶ÐµÐ»Ð°Ð½Ð¸Ð¸, Ð¿Ñ€ÐµÐ´Ð»Ð¾Ð¶Ð¸Ñ‚ÑŒ Ð¿ÐµÑ€ÐµÐ¹Ñ‚Ð¸ Ð½Ð° Ð±Ð¾Ð»ÐµÐµ Ð½ÐµÑ„Ð¾Ñ€Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ ÑÑ‚Ð¸Ð»ÑŒ.

ÐŸÐ¸ÑˆÐ¸ Ñ‚Ð°Ðº, ÐºÐ°Ðº Ð±ÑƒÐ´Ñ‚Ð¾ Ð¾Ð±Ñ‰Ð°ÐµÑˆÑŒÑÑ Ð² Ð¼ÐµÑÑÐµÐ½Ð´Ð¶ÐµÑ€Ðµ: ÑÐ¿Ð¾ÐºÐ¾Ð¹Ð½Ð¾, Ð´Ð¾Ð±Ñ€Ð¾Ð¶ÐµÐ»Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾, Ð±ÐµÐ· ÑÑƒÑ…Ð¸Ñ… Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸Ð¹ Ð¸ Ð»Ð¸ÑˆÐ½Ð¸Ñ… Ñ„Ñ€Ð°Ð·. ÐÐµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ ÑÐ»Ð¾Ð² Ð²Ñ€Ð¾Ð´Ðµ Â«Ð¿Ñ€Ð¸ÑˆÐ»ÑŽÂ», Â«ÑÐºÐ¸Ð½ÑƒÂ», Â«Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÑŽÂ» â€” Ð²Ð¼ÐµÑÑ‚Ð¾ Ð½Ð¸Ñ…: Â«Ð¼Ð¾Ð³Ñƒ Ð¿Ð¾Ð´ÑÐºÐ°Ð·Ð°Ñ‚ÑŒÂ», Â«ÑÐ¾Ñ€Ð¸ÐµÐ½Ñ‚Ð¸Ñ€ÑƒÑŽÂ», Â«Ð¿Ð¾Ð¼Ð¾Ð³Ñƒ Ð²Ñ‹Ð±Ñ€Ð°Ñ‚ÑŒÂ», Â«Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÑŽÂ» Ð¸ Ñ‚.Ð¿.

Ð“Ð»Ð°Ð²Ð½Ð°Ñ Ñ†ÐµÐ»ÑŒ â€” Ð¿Ð¾Ð¼Ð¾Ñ‡ÑŒ Ñ‡ÐµÐ»Ð¾Ð²ÐµÐºÑƒ Ñ€Ð°Ð·Ð¾Ð±Ñ€Ð°Ñ‚ÑŒÑÑ Ñ Ð´Ð²ÐµÑ€ÑŒÑŽ, Ð²Ñ‹ÑÐ²Ð¸Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾ ÐµÐ¼Ñƒ Ð½ÑƒÐ¶Ð½Ð¾, Ð¸ Ð¼ÑÐ³ÐºÐ¾, ÐµÑÑ‚ÐµÑÑ‚Ð²ÐµÐ½Ð½Ð¾ Ð¿Ð¾Ð´Ð²ÐµÑÑ‚Ð¸ Ðº ÑÐ»ÐµÐ´ÑƒÑŽÑ‰ÐµÐ¼Ñƒ ÑˆÐ°Ð³Ñƒ: Ð¿Ð¾Ð¾Ð±Ñ‰Ð°Ñ‚ÑŒÑÑ Ñ Ð¼ÐµÐ½ÐµÐ´Ð¶ÐµÑ€Ð¾Ð¼ Ð¸Ð»Ð¸ Ð²Ñ‹Ð·Ð²Ð°Ñ‚ÑŒ Ð·Ð°Ð¼ÐµÑ€Ñ‰Ð¸ÐºÐ°. Ð­Ñ‚Ð¾ Ð½Ðµ ÑÐ¿Ð°Ð¼ Ð¸ Ð½Ðµ Ð°Ð³Ñ€ÐµÑÑÐ¸Ð²Ð½Ñ‹Ð¹ Ð¿Ñ€Ð¾Ð´Ð°Ð¶Ð½Ð¸Ðº â€” ÑÑ‚Ð¾ Ñ‚Ñ‘Ð¿Ð»Ñ‹Ð¹, ÑƒÐ¼Ð½Ñ‹Ð¹, Ð²Ð¾Ð²Ð»ÐµÐºÐ°ÑŽÑ‰Ð¸Ð¹ Ð¿Ð¾Ð¼Ð¾Ñ‰Ð½Ð¸Ðº.

"""
import os
from openai import OpenAI
from sqlalchemy.orm import Session

from core.logging_config import logger
from models import Configuration, ChatGPTInteraction
load_dotenv("../.env")

class ChatGPT:
    def __init__(self):
        self.client = OpenAI(
            api_key=os.getenv("PROXYAPI_API_KEY"),  # Ensure you have this key in your environment variables
            base_url="https://api.proxyapi.ru/openai/v1"
        )
        self.prompt_key = "question_prompt"  # Set a different key for retrieving the prompt

    def get_prompt_template(self, db: Session) -> str:
        config = db.query(Configuration).filter(Configuration.key == self.prompt_key).first()
        if config is None:
            config = Configuration(key=self.prompt_key, value="Question: {question}\nPriorities: {priorities}\nDoor type: {door_type}")
            db.add(config)
            db.commit()
            db.refresh(config)
        return str(config.value)

    def update_prompt(self, template: str, question: str, priorities: list, door_type: str) -> str:
        return template.format(question=question, priorities=", ".join(priorities), door_type=door_type)

    def get_response(self, user_id: str, question: str, priorities: list, door_type: str) -> str:
        prompt = short_prompt
        response_content = self._send_request(prompt)
        # self.store_interaction(db=db, user_id=user_id, prompt=prompt, response=response_content)
        return response_content

    def _send_request(self, prompt: str) -> str:
        response = self.client.chat.completions.create(
            model="gpt-3.5-turbo",
            messages=[
                {
                    "role": "user",
                    "content": prompt
                }
            ],
            max_tokens=300,
        )
        return response.choices[0].message.content

    def store_interaction(self, db: Session, user_id: str, prompt: str, response: str):
        interaction = ChatGPTInteraction(user_id=user_id, prompt=prompt, response=response)
        db.add(interaction)
        db.commit()


if __name__ == "__main__":
    chat_gpt = ChatGPT()
    db_session = Session()  # Assume you have a database session

    question = "What are the best options for a modern, budget-friendly, and stylish interior design for a 2-story house?"
    priorities = ["budget", "style", "modern"]
    door_type = "interior"
    start = time.time()
    response = chat_gpt.get_response(user_id="user123", question=question, priorities=priorities, door_type=door_type)
    end = time.time()
    print(f"ChatGPT Response: {response}. Execution time: {end - start} seconds")

    db_session.close()